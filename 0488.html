Subject:
Несбалансированный Ним

Body:
<div class="problem_content">

<p>Элис и Боб наслаждаются игрой в <b>Ним</b> каждый день. Однако, им уже поднадоел обычный Ним с тремя кучками.<br />
Поэтому они добавили еще одно правило:</p>

<p>- Нельзя создавать две кучки одинакового размера.</p>

<p>Тройка (<var>a</var>,<var>b</var>,<var>c</var>) описывает размеры трех кучек в текущем положении.<br />
При игре с дополнительным правилом (2,4,5) является одним из проигрышных положений для следующего игрока.</p>

<p>Это видно на следующем примере:<br />
- Элис ходит на (2,4,3)<br />
- Боб ходит на (0,4,3)<br />
- Элис ходит на (0,2,3)<br />
- Боб ходит на (0,2,1)</p>

<p>В отличие от обычного Нима с тремя кучками, в новом варианте игры положение (0,1,2) и его перестановки являются проигрышными для следующего игрока.</p>

<p>Для целого <var>N</var> определим F(<var>N</var>) как сумму <var>a</var>+<var>b</var>+<var>c</var> для всех проигрышных положений для следующего игрока, где 0 &lt; <var>a</var> &lt; <var>b</var> &lt; <var>c</var> &lt; <var>N</var>.</p>

<p>Например, F(8) = 42, потому что существует 4 проигрышных положения для следующего игрока: (1,3,5), (1,4,6), (2,3,6) и (2,4,5).<br />
Также можно показать, что F(128) = 496062.</p>

<p>Найдите последние 9 цифр F(10<sup>18</sup>).</p>
</div>