Subject:
Система шаров и коробок

Body:
<div class="problem_content">

<p>
Рассмотрим бесконечный ряд коробок. Некоторые из них содержат один шар. Например, начальное расположение из 2 последовательных полных коробок, за которыми следуют 2 пустые, потом 2 полные, потом 1 пустая коробка и 2 полные, может быть обозначено последовательностью (2, 2, 2, 1, 2), в которой попеременно записано количество последовательных полных и пустых коробок.
</p>
<p>
Один ход заключается в перемещении каждого шара ровно один раз по следующему правилу: переместите самый левый шар, который еще не был перемещен, в ближайшую пустую коробку справа от него.
</p>
<p>
После одного хода последовательность (2, 2, 2, 1, 2) становится (2, 2, 1, 2, 3), как показано ниже. Заметьте, что запись новой последовательности начинается с первой полной коробки.
</p>

<div align='center'>
<img src="https://projecteuler.net/project/images/p426_baxball1.gif" />
</div>

<p>
Подобная система называется <b>системой шаров и коробок</b> (Box-Ball System, или сокращенно BBS).
</p>
<p>
Можно показать, что после достаточного количества ходов система достигает состояния, в котором последовательные количества полных коробок больше не меняются. В примере ниже последовательное количество <b>полных коробок</b> достигает [1, 2, 3] - назовем это конечным состоянием.
</p>

<div align='center'>
<img src="https://projecteuler.net/project/images/p426_baxball2.gif" />
</div>

<p>
Определим последовательность {<var>t</var><sub><var>i</var></sub>}:<br />
<ul>
<li><var>s</var><sub>0</sub> = 290797
<li><var>s</var><sub><var>k</var>+1</sub> = <var>s</var><sub><var>k</var></sub><sup>2</sup> mod 50515093
<li><var>t</var><sub><var>k</var></sub> = (<var>s</var><sub><var>k</var></sub> mod 64) + 1
</ul>
</p>
<p>
Начиная с исходного расположения (<var>t</var><sub>0</sub>, <var>t</var><sub>1</sub>, …, <var>t</var><sub>10</sub>), конечное состояние будет [1, 3, 10, 24, 51, 75].<br />
Найдите конечное состояние для исходного расположения (<var>t</var><sub>0</sub>, <var>t</var><sub>1</sub>, …, <var>t</var><sub>10 000 000</sub>).<br />
Дайте ответ как сумму квадратов элементов конечного состояния. Например, если конечное состояние - [1, 2, 3], тогда 1<sup>2</sup> + 2<sup>2</sup> + 3<sup>2</sup> = 14 будет Вашим ответом.
</p>


</div>