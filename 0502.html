Subject:
Счет замков

Body:
<div class="problem_content">

<p>Определим <i>блок</i> как прямоугольник с высотой 1 и целочисленной длиной. Назовем конструкцию из сложенных друг на друге блоков <i>замком</i>.</p>

<p>Дана игровая сетка шириной <var>w</var> единиц и высотой <var>h</var> единиц, в которой генерируется замок в соответствии со следующими правилами:</p>


<ol>
<li>Блоки могут располагаться на других блоках, если они не вылезают за края и не нависают над пустым пространством.</li>
<li>Все блоки выровнены строго по сетке.</li>
<li>Любые два соседних блока в одном ряду должны быть отделены хотя бы одной единицей пустого пространства.</li>
<li>Нижний ряд занят блоком длиной <var>w</var>.</li>
<li>Высота замка в его самой высокой точке равна <var>h</var>.</li>
<li>Замок составлен из четного количества блоков.</li>
</ol>

<p>Ниже приведен пример замка для <var>w</var> = 8 и <var>h</var> = 5:</p>

<p align="center"><img src="https://projecteuler.net/project/images/p502_castles.png"></p>

<p>Пусть F(<var>w</var>,<var>h</var>) будет количеством возможных следующих правилам замков при параметрах сетки <var>w</var> и <var>h</var>.</p>

<p>Например, F(4,2) = 10, F(13,10) = 3729050610636, F(10,13) = 37959702514 и F(100,100) mod 1 000 000 007 = 841913936.</p>

<p>Найдите F(10<sup>12</sup>,100) + F(10000,10000) + F(100,10<sup>12</sup>) mod 1 000 000 007.</p>

</div>