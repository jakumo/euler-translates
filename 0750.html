Subject:
Оптимальное	собирание стопку

Body:
<div class="problem_content">

<p>
"Собирание карт в стопку" - это компьютерная игра, начинающаяся с набора из $N$ карт, пронумерованных $1,2,\ldots,N$.
Стопку карт можно переместить, перетягивая ее мышкой в горизонтальном направлении на другую стопку, но только при условии, что в получившейся стопке все карты будут расположены по порядку. Цель игры - собрать все карты в одну стопку, используя минимальное суммарное расстояние перемещений.
</p>

<div style="text-align:center;">
<img src="https://projecteuler.net/project/images/p750_optimal_card_stacking.png" class="dark_img" alt="" />
</div>

<p>
Для данного расположения 6 карт минимальное суммарное расстояние равно $1 + 3 + 1 + 1 + 2 = 8$.
</p>

<p>
$N$ карт изначально расположены так, что карта на позиции $n$ имеет номер $3^n\bmod(N+1), 1\le n\le N$.
</p>
<p>
Определим $G(N)$ как минимальное суммарное расстояние перемещений, необходимое, чтобы собрать все карты в одну последовательность.<br />
Например, для $N = 6$ мы получим исходное расположение $3,2,6,4,5,1$ и $G(6) = 8$.<br />
Известно, что $G(16) = 47$.
</p>

<p>
Найдите $G(976)$.
</p>

<p>
Примечание: $G(N)$ определено не для всех значений $N$.
</p>
</div>