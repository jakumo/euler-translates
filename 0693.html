Subject:
Генератор конечных последовательностей

Body:
<div class="problem_content">

<p>Два положительных целых числа $x$ и $y$ ($x &gt; y$) могут быть использованиы, чтобы сгенерировать последовательность следующим образом:</p>
<ul>
<li>Первый элемент $a_x = y$,</li>
<li>$a_{z+1} = a_z^2 \bmod z$ для $z = x, x+1,x+2,\ldots$ и</li>
<li>генерирование заканчивается на элементе, равном 0 или 1.</li>
</ul>
<p>Число элементов этой последовательности обозначается $l(x,y)$.</p>

<p>Например, при $x = 5$ и $y = 3$ мы получим $a_5 = 3$, $a_6 = 3^2 \bmod 5 = 4$, $a_7 = 4^2\bmod 6 = 4$ и т.д. Это даст последовательность из 29 элементов:<br />
$3,4,4,2,4,7,9,4,4,3,9,6,4,16,4,16,16,4,16,3,9,6,10,19,25,16,16,8,0$<br />
Поэтому $l(5,3) = 29$.</p>

<p>Определим $g(x)$ как максимальное значение $l(x,y)$ для $y &lt; x$. Например, $g(5) = 29$.</p>

<p>Далее, определим $f(n)$ как максимальное значение $g(x)$ для $x \le n$. Например, $f(100) = 145$ и $f(10\,000) = 8824$.</p>

<p>Найдите $f(3\,000\,000)$.</p>