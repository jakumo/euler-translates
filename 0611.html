Subject:
Квадратные шаги по коридору

Body:
<div class="problem_content">

<p>Петр перемещается по коридору с <var>N</var>+1 дверями, последовательно пронумерованными от 0 до <var>N</var>. Изначально все двери закрыты. Петр начинает перед дверью 0 и повторяет следующие шаги:</p>
<ul><li>Сначала он отходит от своей позиции на число дверей, равное квадрату целого числа.</li>
<li>Затем он отходит от своей новой позиции на число дверей, равное еще большему квадрату целого числа.</li>
<li>Он изменяет состоние двери, оказавшейся перед ним (открывает, если он закрыта, или закрывает, если открыта).</li>
<li>Наконец, он возвращается к двери 0.</li>
</ul><p>Назовем любую последовательность этих шагов действием. Петр никогда не выполняет одно и то же действие дважды и выполняет все возможные действия, которые не приведут его дальше, чем последняя дверь.</p>
<p>Пусть <var>F</var>(<var>N</var>) будет количеством дверей, которые остались открытыми после того, как Петр выполнил все возможные действия. Известно, что <var>F</var>(5) = 1, <var>F</var>(100) = 27, <var>F</var>(1000) = 233 и <var>F</var>(10<sup>6</sup>) = 112168.</p>
<p>Найдите <var>F</var>(10<sup>12</sup>).</p>

</div>