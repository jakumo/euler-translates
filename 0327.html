Subject:
Проклятые комнаты.

Body:
<div class="problem_content">
<p>Последовательность из трех комнат соединена между собой автоматическими дверьми.</p>

<div align='center'><img src="http://projecteuler.net/project/images/rooms_of_doom.gif" alt="" /></div>

<p>Каждая дверь управляется карточкой безопастности. Как только в комнату заходят, дверь автоматически закрывается
и эта карточка безопасности повторному использованию не подлежит. Автомат в начальной точке выдает неограниченное
число карточек, однако в каждой из комнат (в том числе и в начальной) установлены сканнеры, и если они обнаружат
у владельца более трех карточек, или же обнаружат карточку на полу, то все двери необратимо запираются. В то же время,
во всех комнатах есть ящик для хранения любого числа карточек безопасности для использования на более поздних этапах.</p>

<p>Если попытаетесь просто пройти через все комнаты по очереди, то когда окажетесь в комнате 3, все карточки будут
израсходованы, и Вы навсегда останетесь в этой комнате!</p>

<p>Но если воспользоваться ящиками для хранения, то побег возможен. К примеру, можно зайти в 1 комнату при помощи первой
карточки, полощить в ящик хранения вторую карточку, а третьей карточкой вернуться обратно в начальную комнату.
Пополнив в автомате запасы тремя дополнительными карточками, можно войти в первую комнату и забрать карточку из ящика
хранения. Теперь у Вас снова три карточки, и Вам удастся пройти через оставшиеся три двери. Этот способ позволяет пройти
через все три комнаты, воспользовавшись в общей сложности 6 карточками.</p>

<p>Через шесть комнат возможно пройти, истратив 123 карточки безопасности, имея на руках в любой из комнат не более 3 карточек.</p>

<p>Пусть <var>C</var> - максимальное допустимое системой число карточек на руках.</p>
<p>Пусть <var>R</var> - число комнат, через которые необходимо пройти.</p>
<p>Пусть M(<var>C</var>,<var>R</var>) - минимальное число карточек, которое необходимо получить в автомате, чтобы пройти через
<var>R</var> комнат, имея на руках не более <var>C</var> карточек в любой момент времени.</p>

<p>Например, M(3,6)=123 и M(4,6)=23.<br />Тогда &Sigma;M(<var>C</var>,6)=146 для 3 <img src='http://projecteuler.net/images/symbol_le.gif'
width='10' height='12' alt='&le;' border='0' style='vertical-align:middle;' /> <var>C</var> <img src='http://projecteuler.net/images/symbol_le.gif'
width='10' height='12' alt='&le;' border='0' style='vertical-align:middle;' /> 4.<br /></p>


<p>Дано, что &Sigma;M(<var>C</var>,10)=10382 для 3 <img src='http://projecteuler.net/images/symbol_le.gif'
width='10' height='12' alt='&le;' border='0' style='vertical-align:middle;' /> <var>C</var> <img
src='http://projecteuler.net/images/symbol_le.gif' width='10' height='12' alt='&le;' border='0'
style='vertical-align:middle;' /> 10.</p>
<p>Найдите &Sigma;M(<var>C</var>,30) для 3 <img src='http://projecteuler.net/images/symbol_le.gif'
width='10' height='12' alt='&le;' border='0' style='vertical-align:middle;' /> <var>C</var> <img
src='http://projecteuler.net/images/symbol_le.gif' width='10' height='12' alt='&le;' border='0'
style='vertical-align:middle;' /> 40.</p>
</div>